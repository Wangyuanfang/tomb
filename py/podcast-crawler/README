====================
itunes爬虫有两个部分:
1. index 找到所有的podcast-id. (通过抓取目录页面和趋势页面)
2. lookup 根据podcast-id查找到feedUrl. 并且保存itunes上面存储的信息
index缓存时间可以在7天左右. lookup缓存时间则不必太长(author, url等信息通常都不会变动，而那些会变动的信息我们会主动根据url去抓取)

podcast: 
1. down feed. 根据feedUrl检查rss是否有更新.
2. parse feed. 如果rss发生更新，就会重新进行解析.
3. back fill. 将平台等信息整合进来. 通常这个过程只要做一次就行.
前面两个过程都可以做缓存的，第一个通过http last-modified和etag字段来减少请求（配上content-length估计也行），第二个则可以根据更新时间和上次解析时间来做缓存. 这个缓存时间也可以在7天左右. 我们抓取feed信息只是为了更好地做检索, 所以其实不用特别及时.

weight:
1. fill_itunes_weight. 从itunes上把各个podcast权重抓取下来
2. merge_weight. 将各个平台上的权重, 以及自己计算权重合并起来
3. update_toplist. 对各个国家和流派的权重做排序.

misc:
fix_cache_feed_key.py 原来cache是用feed_<itunes_id>作为key. 后来变为sha1(feedUrl).

====================
HOW TO RUN:
1. ./itunes.py --down-index --parse-index
2. ./itunes.py --down-lookup --parse-lookup
3. ./podcast.py --down-feed --parse-feed
4. ./podcast.py --back-fill
5. ./weight.py # 每周运行. 权重不需要经常变动.

====================
API

** 获取流派名称和ID
URL: http://gw:8080/category?country=gb

```
{"1304": "Education", "1323": "Games & Hobbies", "1315": "Science & Medicine", "1314": "Religion & Spirituality", "1301": "Arts", "1324": "Society & Culture", "1316": "Sports & Hobbies", "1303": "Comedy", "1325": "Government & Organisations", "1309": "TV & Film", "1318": "Technology", "1307": "Health", "1321": "Business", "1305": "Kids & Family", "1310": "Music", "1311": "News & Politics"}
```

** 获取top podcast
URL: http://gw:8080/top?country=us[&genre=1301][&skip=0][&limit=20]

```
[{"feedUrl": "http://www.npr.org/rss/podcast.php?id=381444908", "trackCount": 50, "description": "Fresh Air from WHYY, the Peabody Award-winning weekday magazine of contemporary arts and issues, is one of public radio's most popular programs. Hosted by Terry Gross, the show features intimate conversations with today's biggest luminaries.", "author": "NPR", "title": "Fresh Air", "cover": "http://is4.mzstatic.com/image/thumb/Music7/v4/d5/08/4f/d5084fc6-c926-1442-93c6-941a508aa5f5/source/30x30bb.jpg", "releaseDate": "Fri, 15 Jan 2016 20:00:00 -0500"}, ....]
```

返回字典数组，每个字典里面有这些字段:
- feedUrl: rss url
- trackCount: 多少曲目
- description: 描述信息
- author: 作者
- title: 标题
- cover: 封面url
- releaseDate: 更新时间
